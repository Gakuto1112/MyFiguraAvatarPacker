# MyFiguraAvatarPacker
私（[Gakuto1112](https://github.com/Gakuto1112)）が作成する[Figura](https://modrinth.com/mod/figura)アバターを配布しやすい形式に加工するワークフローです。

このレポジトリには以下のワークフローが利用可能です。

- レポジトリにあるアバターを配布しやすい形式に加工し、アーティファクトとしてアップロードする。
- リリースが作成された際にアバターの加工を行い、リリースアセットにアバターデータを追加する。

ワークフローで行われる加工では、以下のことが行われます。

- アバターを使用する上で不要なデータ（`.github/`など）を削除する。
  - `LICENSE`は含まれます。
- レポジトリ上にあるREADMEを読むことを促す、簡易的な`README.txt`を生成する。
- モデルファイル上にある参照画像（アバターを使用する上では一切必要ない）を削除し、配布ファイルのサイズを減らす。

これらの加工は非破壊的であるため、レポジトリにあるアバターのデータが上書きされることはありません。
ご安心ください。

## 使用条件について
このレポジトリのワークフローのコアをそのまま使用するには、以下の条件を満たす必要があります。

- 1つのブランチにアバターが1つのみである。
- レポジトリの構造が以下のようになっている。

  ```
  ブランチのルート
  ├ .github/
  │ ├ README.md（英語で書かれたREADME）
  │ └ README_jp.md（日本語で書かれたREADME）
  ├ models/
  │ └ （ここにアバターモデルが全て入っている。ここ以外は認められない。）
  ├ scripts/
  │ └ （ここにアバタースクリプトが全て入っている。ここ以外は認められない。）
  ├ textures/
  │ └ （ここにアバターテクスチャが全て入っている。ここ以外は認められない。）
  ├ LICENSE（無くてもよい）
  ├ avatar.json
  └ avatar.png
  ```

  - ここに書かれていないファイル/ディレクトリが存在していも問題はないですが、これらは無視されます。
  - [こちらのテンプレート](https://github.com/Gakuto1112/FiguraAvatarTemplate)を使用すると、上記形式に従いやすくなります。

## 加工済みアバターファイルについて
ワークフローによって加工されたアバターファイルはアーティファクトとしてアップロードされます。
アバターファイルをダウンロードするとzip圧縮されているので展開してください。

アバターファイルは以下のような構造になっています。

```
アバターファイル.zip
├ アバターフォルダ/
│ └ ...
├ LICENSE（レポジトリに含まれている場合のみ）
└ README.txt
```

アバターフォルダをFiguraのアバターディレクトリ（`...\.minecraft\figura\avatars\`、環境によって異なります）に入れるとゲーム内でアバターを使用できるようになります。

アバターファイル及びアバターフォルダの名前は、アバターがあるブランチの名前になります。